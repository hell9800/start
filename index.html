<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careless Rises - Gaming Tournaments</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .background-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .bg-circle {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(37, 211, 102, 0.1), rgba(0, 122, 255, 0.1));
            animation: float 6s ease-in-out infinite;
        }

        .bg-circle:nth-child(1) {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .bg-circle:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .bg-circle:nth-child(3) {
            width: 100px;
            height: 100px;
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .content {
            text-align: center;
            max-width: 500px;
            width: 100%;
            z-index: 1;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #25D366, #007AFF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(37, 211, 102, 0.3);
        }

        .tagline {
            font-size: 1.1rem;
            color: #ccc;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .welcome-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff;
        }

        .subtitle {
            font-size: 1rem;
            margin-bottom: 30px;
            color: #aaa;
            line-height: 1.5;
        }

        .button {
            width: 100%;
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .button:hover::before {
            left: 100%;
        }

        .whatsapp-btn {
            background: linear-gradient(45deg, #25D366, #20b558);
            color: white;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
        }

        .admin-btn {
            background: linear-gradient(45deg, #007AFF, #0056b3);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 122, 255, 0.4);
        }

        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 122, 255, 0.6);
        }

        .danger-btn {
            background: linear-gradient(45deg, #ff4757, #c44569);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }

        .danger-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.6);
        }

        .policy-btn {
            background: linear-gradient(45deg, #5f27cd, #341f97);
            color: white;
            box-shadow: 0 4px 15px rgba(95, 39, 205, 0.4);
            font-size: 0.9rem;
            padding: 12px 20px;
        }

        .policy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(95, 39, 205, 0.6);
        }

        .info-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            font-size: 0.9rem;
            padding: 12px 20px;
        }

        .info-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }

        .policy-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .policy-buttons .button {
            margin-bottom: 0;
        }

        .login-form {
            display: none;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
            font-size: 0.9rem;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .input-group input::placeholder {
            color: #888;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 10px rgba(0, 122, 255, 0.3);
        }

        .phone-input-container {
            display: flex;
            align-items: center;
        }

        .country-code {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-right: none;
            border-radius: 8px 0 0 8px;
            padding: 12px;
            color: white;
            font-size: 1rem;
            min-width: 60px;
            text-align: center;
        }

        .phone-number {
            border-radius: 0 8px 8px 0 !important;
            flex: 1;
        }

        .back-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #ccc;
            margin-bottom: 10px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .error-message {
            color: #ff4757;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 71, 87, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        .success-message {
            color: #2ed573;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: rgba(46, 213, 115, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(46, 213, 115, 0.3);
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #25D366, #007AFF);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .admin-badge {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #007AFF, #0056b3);
            border-color: #007AFF;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Tournament Cards */
        .tournament-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tournament-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .tournament-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .tournament-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .game-type {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .game-type.pubg { background: linear-gradient(45deg, #ff6b6b, #ee5a52); }
        .game-type.free_fire { background: linear-gradient(45deg, #feca57, #ff9ff3); }
        .game-type.cod_mobile { background: linear-gradient(45deg, #48dbfb, #0abde3); }
        .game-type.bgmi { background: linear-gradient(45deg, #ff9ff3, #54a0ff); }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-badge.upcoming { background: #feca57; color: #000; }
        .status-badge.live { background: #2ed573; color: #000; }
        .status-badge.completed { background: #747d8c; color: #fff; }

        .tournament-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }

        .tournament-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            color: #ccc;
        }

        .detail-value {
            color: #fff;
            font-weight: bold;
        }

        .tournament-actions {
            display: flex;
            gap: 10px;
        }

        .register-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .register-btn.available {
            background: linear-gradient(45deg, #25D366, #20b558);
            color: white;
        }

        .register-btn.registered {
            background: linear-gradient(45deg, #007AFF, #0056b3);
            color: white;
        }

        .register-btn.full {
            background: #747d8c;
            color: white;
            cursor: not-allowed;
        }

        /* Profile Section */
        .profile-section {
            max-width: 600px;
            margin: 0 auto;
        }

        .profile-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, #25D366, #007AFF);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }

        .profile-info {
            text-align: left;
            margin-top: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-label {
            color: #ccc;
            font-weight: 500;
        }

        .info-value {
            color: #fff;
            font-weight: bold;
        }

        /* Loading spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .policy-modal-content {
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .policy-content {
            text-align: left;
            line-height: 1.6;
            color: #ccc;
        }

        .policy-content h2 {
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #25D366, #007AFF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .policy-content h3 {
            color: #25D366;
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
        }

        .policy-content p, .policy-content li {
            margin-bottom: 10px;
            color: #ccc;
        }

        .policy-content ol, .policy-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .policy-content ol li {
            margin-bottom: 15px;
            padding-left: 5px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 15px;
        }

        .close:hover {
            color: white;
        }

        .footer-links {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: #ccc;
            text-decoration: none;
            font-size: 0.85rem;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .footer-link:hover {
            color: #25D366;
            background: rgba(37, 211, 102, 0.1);
        }

        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .welcome-title {
                font-size: 1.5rem;
            }

            .dashboard-header {
                flex-direction: column;
                text-align: center;
            }

            .navigation {
                justify-content: center;
            }

            .tournament-grid {
                grid-template-columns: 1fr;
            }

            .tournament-details {
                grid-template-columns: 1fr;
            }

            .policy-buttons {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .footer-links {
                flex-direction: column;
                gap: 5px;
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="background-elements">
            <div class="bg-circle"></div>
            <div class="bg-circle"></div>
            <div class="bg-circle"></div>
        </div>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="content">
            <h1 class="logo">Careless Rises</h1>
            <p class="tagline">Gaming Tournament Platform</p>
            
            <h2 class="welcome-title">Welcome to Gaming Tournaments</h2>
            <p class="subtitle">
                Step 1: You must opt-in on WhatsApp first to access tournaments.<br>
                Tap below to join our WhatsApp community.
            </p>
            
            <button class="button whatsapp-btn" onclick="handleWhatsAppOptIn()">
                🚀 Get Opted In on WhatsApp
            </button>
            
            <button class="button admin-btn" onclick="showAdminLogin()">
                👤 Administration Login
            </button>

            <!-- Policy Buttons -->
            <div class="policy-buttons">
                <button class="button policy-btn" onclick="showPrivacyPolicy()">
                    📋 Privacy Policy
                </button>
                <button class="button policy-btn" onclick="showTermsConditions()">
                    📜 Terms & Conditions
                </button>
                <button class="button policy-btn" onclick="showRefundPolicy()">
                    💰 Refund Policy
                </button>
                <button class="button info-btn" onclick="showAboutUs()">
                    ℹ️ About Us
                </button>
            </div>

            <!-- Footer Links -->
            <div class="footer-links">
                <a href="#" class="footer-link" onclick="showPrivacyPolicy()">Privacy Policy</a>
                <a href="#" class="footer-link" onclick="showTermsConditions()">Terms & Conditions</a>
                <a href="#" class="footer-link" onclick="showRefundPolicy()">Refund Policy</a>
                <a href="#" class="footer-link" onclick="showAboutUs()">About Us</a>
                <a href="#" class="footer-link" onclick="showContactInfo()">Contact Us</a>
            </div>
        </div>

        <!-- Admin Login -->
        <div id="admin-login" class="content login-form">
            <button class="button back-btn" onclick="showWelcomeScreen()">
                ← Back to Welcome
            </button>
            
            <h2 class="welcome-title">Administration Login</h2>
            <p class="subtitle">Enter your admin credentials to continue</p>
            
            <div class="input-group">
                <label for="admin-username">Username</label>
                <input type="text" id="admin-username" placeholder="Enter username">
            </div>
            
            <div class="input-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password" placeholder="Enter password">
            </div>
            
            <button class="button admin-btn" onclick="handleAdminLogin()">
                Login as Admin
            </button>
            
            <div id="admin-error" class="error-message" style="display: none;"></div>
            <div id="admin-success" class="success-message" style="display: none;"></div>
        </div>

        <!-- Phone Login -->
        <div id="phone-login" class="content login-form">
            <button class="button back-btn" onclick="showWelcomeScreen()">
                ← Back to Welcome
            </button>
            
            <h2 class="welcome-title">Enter Your Phone Number</h2>
            <p class="subtitle" id="phone-subtitle">Enter your phone number to request OTP</p>
            
            <div class="input-group">
                <label for="phone-number">Phone Number</label>
                <div class="phone-input-container">
                    <div class="country-code">+91</div>
                    <input type="tel" id="phone-number" class="phone-number" placeholder="Enter your phone number" maxlength="10">
                </div>
            </div>
            
            <button class="button whatsapp-btn" id="phone-submit-btn" onclick="requestOTP()">
                Send OTP
            </button>
            
            <div id="phone-error" class="error-message" style="display: none;"></div>
            <div id="phone-success" class="success-message" style="display: none;"></div>
        </div>

        <!-- OTP Verification -->
        <div id="otp-verification" class="content login-form">
            <button class="button back-btn" onclick="showPhoneLogin()">
                ← Back to Phone Number
            </button>
            
            <h2 class="welcome-title">Verify OTP</h2>
            <p class="subtitle">Enter the OTP sent to your WhatsApp</p>
            
            <div class="input-group">
                <label for="otp-code">OTP Code</label>
                <input type="text" id="otp-code" placeholder="Enter 6-digit OTP" maxlength="6">
            </div>
            
            <button class="button whatsapp-btn" onclick="verifyOTP()">
                Verify OTP
            </button>
            
            <div id="otp-error" class="error-message" style="display: none;"></div>
        </div>

        <!-- Profile Setup -->
        <div id="profile-setup" class="content login-form">
            <h2 class="welcome-title">Complete Your Profile</h2>
            <p class="subtitle">Please fill in your details to continue</p>
            
            <div class="input-group">
                <label for="user-name">Full Name</label>
                <input type="text" id="user-name" placeholder="Enter your full name">
            </div>
            
            <div class="input-group">
                <label for="user-age">Age</label>
                <input type="number" id="user-age" placeholder="Enter your age" min="13" max="100">
            </div>
            
            <div class="input-group" style="text-align: left;">
                <label>
                    <input type="checkbox" id="consent-checkbox" style="width: auto; margin-right: 10px;">
                    I agree to participate in tournaments and provide my details
                </label>
            </div>
            
            <button class="button whatsapp-btn" onclick="completeProfile()">
                Complete Profile
            </button>
            
            <div id="profile-error" class="error-message" style="display: none;"></div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h1 class="logo">Careless Rises</h1>
                    <p class="tagline">Gaming Tournament Platform</p>
                </div>
                <div class="user-info">
                    <div class="avatar" id="user-avatar">?</div>
                    <div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span id="user-display-name" style="font-weight: bold;">Loading...</span>
                            <span id="admin-badge" class="admin-badge" style="display: none;">Admin</span>
                        </div>
                        <div id="user-phone" style="color: #ccc; font-size: 0.9rem;">...</div>
                    </div>
                    <button class="button danger-btn" onclick="logout()" style="width: auto; margin: 0; padding: 10px 15px;">
                        Logout
                    </button>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-btn active" onclick="showSection('tournaments')">🏆 Tournaments</button>
                <button class="nav-btn" onclick="showSection('my-tournaments')">📋 My Tournaments</button>
                <button class="nav-btn" onclick="showSection('profile')">👤 Profile</button>
            </div>

            <!-- Tournaments Section -->
            <div id="tournaments-section" class="section active">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                    <h2>Available Tournaments</h2>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="game-filter" onchange="loadTournaments()" style="padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                            <option value="">All Games</option>
                            <option value="PUBG">PUBG</option>
                            <option value="FREE_FIRE">Free Fire</option>
                            <option value="COD_MOBILE">COD Mobile</option>
                            <option value="BGMI">BGMI</option>
                        </select>
                        <select id="status-filter" onchange="loadTournaments()" style="padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                            <option value="UPCOMING">Upcoming</option>
                            <option value="LIVE">Live</option>
                            <option value="COMPLETED">Completed</option>
                        </select>
                        <button class="nav-btn" onclick="loadTournaments()">🔄 Refresh</button>
                    </div>
                </div>
                <div id="tournaments-grid" class="tournament-grid">
                    <div style="text-align: center; padding: 50px; color: #ccc;">
                        <div class="loading"></div>
                        <p style="margin-top: 10px;">Loading tournaments...</p>
                    </div>
                </div>
            </div>

            <!-- My Tournaments Section -->
            <div id="my-tournaments-section" class="section">
                <h2 style="margin-bottom: 20px;">My Tournaments</h2>
                <div id="my-tournaments-grid" class="tournament-grid">
                    <div style="text-align: center; padding: 50px; color: #ccc;">
                        <div class="loading"></div>
                        <p style="margin-top: 10px;">Loading your tournaments...</p>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profile-section" class="section">
                <div class="profile-section">
                    <h2 style="margin-bottom: 20px; text-align: center;">My Profile</h2>
                    <div class="profile-card">
                        <div class="profile-avatar" id="profile-avatar">?</div>
                        <h3 id="profile-name">Loading...</h3>
                        <p style="color: #ccc; margin-bottom: 20px;" id="profile-phone">...</p>
                        
                        <div class="profile-info">
                            <div class="info-row">
                                <span class="info-label">Phone Number:</span>
                                <span class="info-value" id="info-phone">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Name:</span>
                                <span class="info-value" id="info-name">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Age:</span>
                                <span class="info-value" id="info-age">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Account Type:</span>
                                <span class="info-value" id="info-type">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Member Since:</span>
                                <span class="info-value" id="info-joined">...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tournament Registration Modal -->
    <div id="registration-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 style="margin-bottom: 20px;">Register for Tournament</h2>
            <div id="modal-tournament-info"></div>
            
            <div class="input-group">
                <label for="modal-game-name">Game Name/Username</label>
                <input type="text" id="modal-game-name" placeholder="Enter your in-game name">
            </div>
            
            <div class="input-group">
                <label for="modal-uid">Game UID</label>
                <input type="text" id="modal-uid" placeholder="Enter your game UID">
            </div>
            
            <button class="button whatsapp-btn" onclick="confirmRegistration()">
                Register Now
            </button>
            
            <div id="modal-error" class="error-message" style="display: none;"></div>
            <div id="modal-success" class="success-message" style="display: none;"></div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="modal">
        <div class="modal-content policy-modal-content">
            <span class="close" onclick="closePrivacyModal()">&times;</span>
            <div class="policy-content">
                <h2>Privacy Policy for Careless Rises</h2>
                <p><strong>Effective Date:</strong> August 3, 2025</p>
                <p>At Careless Rises, we are committed to protecting the privacy of our users. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application or website.</p>
                
                <h3>1. Information We Collect</h3>
                <p><strong>a) Personal Information:</strong></p>
                <ul>
                    <li>Name</li>
                    <li>Phone Number</li>
                    <li>Email Address</li>
                    <li>Payment Information (if applicable)</li>
                    <li>Device Information (Device ID, IP Address)</li>
                </ul>
                
                <p><strong>b) Non-Personal Information:</strong></p>
                <ul>
                    <li>App Usage Data</li>
                    <li>Preferences and Settings</li>
                    <li>Crash Logs and Diagnostics</li>
                </ul>

                <h3>2. How We Use Your Information</h3>
                <p>We may use the collected information to:</p>
                <ul>
                    <li>Create and manage user accounts</li>
                    <li>Process payments and transactions</li>
                    <li>Provide customer support</li>
                    <li>Improve app functionality and user experience</li>
                    <li>Send updates, offers, or notifications related to the app</li>
                    <li>Comply with legal obligations</li>
                </ul>

                <h3>3. Sharing of Information</h3>
                <p>We do NOT sell or rent your personal data to third parties. However, we may share information with:</p>
                <ul>
                    <li>Payment Gateways for processing transactions</li>
                    <li>Service Providers assisting with app operations</li>
                    <li>Legal authorities when required by law</li>
                </ul>

                <h3>4. Data Security</h3>
                <p>We use industry-standard encryption and security practices to protect your data. However, no system is 100% secure. We cannot guarantee absolute security of your data transmitted to our services.</p>

                <h3>5. Your Data Rights</h3>
                <p>You have the right to:</p>
                <ul>
                    <li>Access the personal data we hold about you</li>
                    <li>Request correction of inaccurate data</li>
                    <li>Request deletion of your data</li>
                    <li>Opt-out of promotional communications</li>
                </ul>

                <h3>6. Retention of Data</h3>
                <p>We retain your data as long as your account is active or as needed to comply with legal obligations.</p>

                <h3>7. Third-Party Links and Services</h3>
                <p>Our app may contain links to third-party websites or services. We are not responsible for the privacy practices or content of these third parties.</p>

                <h3>8. Children's Privacy</h3>
                <p>Careless Rises does not knowingly collect data from children under the age of 13. If we discover such data, we will delete it promptly.</p>

                <h3>9. Updates to This Privacy Policy</h3>
                <p>We reserve the right to modify this Privacy Policy at any time. Any changes will be posted within the app or on our website, and your continued use indicates acceptance.</p>

                <h3>10. Contact Us</h3>
                <p>If you have any questions about this Privacy Policy, please contact us at:</p>
                <ul>
                    <li>Email: arjunpratap9080@gmail.com</li>
                    <li>Phone: +91-9654183233</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Terms & Conditions Modal -->
    <div id="terms-modal" class="modal">
        <div class="modal-content policy-modal-content">
            <span class="close" onclick="closeTermsModal()">&times;</span>
            <div class="policy-content">
                <h2>Terms and Conditions</h2>
                <p><strong>Effective Date:</strong> August 3, 2025</p>
                <p>Please read these Terms and Conditions carefully before using our skill-based gaming tournament platform, Careless Rises.</p>

                <h3>Skill-Based Gaming Disclaimer</h3>
                <p>All games and tournaments hosted on Careless Rises are 100% skill-based. There is no element of chance or luck involved in determining outcomes. Winnings are purely based on the user's performance, strategy, and skill level.</p>

                <h3>Tournament Rules & Regulations</h3>
                <ol>
                    <li><strong>Match Cancellation Refund:</strong> If any match is cancelled due to any reason from our side, then users will get their match fee refunded in their account.</li>
                    <li><strong>Late Entry Policy:</strong> If you fail to enter the match before the given match start time, you will not be eligible for a refund.</li>
                    <li><strong>Fair Play Policy:</strong> If you are found using any kind of hack, cheat, or teaming technique, your account will be permanently blocked, and all winnings and withdrawals will be forfeited.</li>
                    <li><strong>Multiple Account Policy:</strong> Creating or using multiple accounts is strictly prohibited. Offenders will be permanently banned.</li>
                </ol>

                <h3>General Terms</h3>
                <ul>
                    <li>All participants must be at least 18 years of age.</li>
                    <li>Registration requires WhatsApp opt-in and phone number verification.</li>
                    <li>Prize distribution will be processed within 24–48 hours of tournament completion.</li>
                    <li>Disputes regarding tournament outcomes will be reviewed and resolved by our admin team.</li>
                    <li>We reserve the right to modify rules, formats, or prize structures at any time.</li>
                    <li>By participating, you agree to abide by all game-specific rules and platform-wide fair play policies.</li>
                </ul>

                <h3>Account Suspension & Bans</h3>
                <p>Accounts may be suspended or permanently banned for any of the following:</p>
                <ul>
                    <li>Use of hacks, cheats, or unauthorized tools</li>
                    <li>Creating or operating multiple accounts</li>
                    <li>Abusive, offensive, or inappropriate behavior</li>
                    <li>Violation of tournament or platform rules</li>
                    <li>Engagement in fraud, scams, or unethical behavior</li>
                </ul>

                <h3>Limitation of Liability</h3>
                <p>Careless Rises shall not be liable for any direct, indirect, incidental, special, or consequential damages resulting from the use of our platform, including but not limited to loss of data, suspension, or technical issues.</p>

                <h3>Contact Information</h3>
                <p>For any questions regarding these Terms and Conditions, please contact us at <strong>arjunpratap9080@gmail.com</strong></p>
            </div>
        </div>
    </div>

    <!-- Refund Policy Modal -->
    <div id="refund-modal" class="modal">
        <div class="modal-content policy-modal-content">
            <span class="close" onclick="closeRefundModal()">&times;</span>
            <div class="policy-content">
                <h2>Refund Policy</h2>
                
                <h3>Refund for Kills by Hackers/Cheaters</h3>
                <p>If you are killed in a match due to a hacker or cheater, your entry fee will be refunded to your wallet after verification.</p>

                <h3>Server-related Match Cancellations</h3>
                <p>In case a match is cancelled due to server issues or technical problems, your full entry amount will be refunded to your wallet.</p>

                <h3>Late Entry</h3>
                <p>If you fail to join the match before the scheduled start time, you will not be eligible for a refund under any circumstances.</p>

                <h3>Use of Hacks or Unfair Play</h3>
                <p>If you are found using any hacks, cheats, or teaming up unfairly, your account will be permanently banned and you will lose all withdrawal privileges.</p>

                <h3>Cancellation Policy</h3>
                
                <h4>Match Cancellation by Us</h4>
                <p>If a match is cancelled for any reason on our end, the full entry fee will be refunded to your wallet.</p>

                <h4>User-Initiated Cancellations Not Allowed</h4>
                <p>Once you join a paid match, cancellation is not permitted and no refund will be issued.</p>

                <h3>Contact Us</h3>
                <p>For any further queries or support, feel free to contact us at:</p>
                <p>📧 <strong>arjunpratap098@gmail.com</strong></p>
            </div>
        </div>
    </div>

    <!-- About Us Modal -->
    <div id="about-modal" class="modal">
        <div class="modal-content policy-modal-content">
            <span class="close" onclick="closeAboutModal()">&times;</span>
            <div class="policy-content">
                <h2>About Us</h2>
                
                <p>Careless Rises is your ultimate destination for all things eSports – from competitive gaming tournaments to purchasing in-game currency like UC, BC, and Diamonds.</p>
                
                <p><strong>Launched on 1st August 2025</strong>, Careless Rises is an innovative online platform that offers thrilling gameplay experiences, exciting rewards, and nonstop entertainment.</p>
                
                <p>Whether you're into <strong>BGMI, BGMI Lite, Free Fire, Call of Duty Mobile</strong>, or other top battle royale games, you can join and compete for real cash prizes and in-game rewards based on your performance.</p>
                
                <p>Imagine turning your gaming passion into income – that's exactly what Careless Rises is all about. Enter daily tournaments, join custom rooms, and earn rewards for achievements like Chicken Dinners and each kill you score.</p>
                
                <p>You can also buy game currencies such as <strong>UC, BC, and Diamonds</strong> directly from the platform, making it a one-stop shop for all your gaming needs.</p>
                
                <p>Join the growing community of mobile gamers who are not just playing—but <strong>winning every day</strong>.</p>
                
                <p><strong>Careless Rises is where skill meets reward.</strong></p>
                
                <p style="text-align: center; font-size: 1.2rem; color: #25D366; font-weight: bold; margin-top: 30px;">Ready to rise?</p>
            </div>
        </div>
    </div>

    <!-- Contact Info Modal -->
    <div id="contact-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeContactModal()">&times;</span>
            <div class="policy-content">
                <h2>Contact Us</h2>
                <p>Get in touch with the Careless Rises team:</p>

                <h3>Customer Support</h3>
                <ul>
                    <li><strong>Email:</strong> arjunpratap9080@gmail.com</li>
                    <li><strong>WhatsApp:</strong> <a href="https://wa.me/message/UC2XDTIIDEJEO1" target="_blank" style="color: #25D366;">Click here to chat</a></li>
                    <li><strong>Response Time:</strong> 24–48 hours</li>
                </ul>

                <h3>Business Hours</h3>
                <ul>
                    <li><strong>Monday – Friday:</strong> 9:00 AM – 11:00 PM IST</li>
                    <li><strong>Saturday:</strong> 10:00 AM – 10:00 PM IST</li>
                    <li><strong>Sunday:</strong> Closed</li>
                </ul>

                <h3>Tournament Support</h3>
                <p>For urgent tournament-related issues during live matches, please contact us via WhatsApp for immediate assistance.</p>
            </div>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'https://rest9919.onrender.com'; // Change this to your backend URL
        
        let currentUser = {
            phone: '',
            isAdmin: false,
            hasOptedIn: false,
            userData: null,
            phoneVerified: false
        };

        let currentTournamentId = null;

        // Screen Navigation Functions
        function showWelcomeScreen() {
            hideAllScreensAndSections();
            document.getElementById('welcome-screen').style.display = 'block';
            clearMessages();
        }

        function showAdminLogin() {
            hideAllScreensAndSections();
            document.getElementById('admin-login').style.display = 'block';
            clearMessages();
        }

        function showPhoneLogin() {
            hideAllScreensAndSections();
            document.getElementById('phone-login').style.display = 'block';
            clearMessages();
            
            // Update UI for admin users
            if (currentUser.isAdmin) {
                document.getElementById('phone-subtitle').textContent = 'Enter your admin phone number to continue';
                document.getElementById('phone-submit-btn').textContent = 'Continue as Admin';
                document.getElementById('phone-submit-btn').onclick = handleAdminPhoneSubmit;
            } else {
                document.getElementById('phone-subtitle').textContent = 'Enter your phone number to request OTP';
                document.getElementById('phone-submit-btn').textContent = 'Send OTP';
                document.getElementById('phone-submit-btn').onclick = requestOTP;
            }
        }

        function showOTPVerification() {
            hideAllScreensAndSections();
            document.getElementById('otp-verification').style.display = 'block';
            clearMessages();
        }

        function showProfileSetup() {
            hideAllScreensAndSections();
            document.getElementById('profile-setup').style.display = 'block';
            clearMessages();
        }

        function showDashboard() {
            hideAllScreensAndSections();
            document.getElementById('dashboard').style.display = 'block';
            loadUserProfile();
            loadTournaments();
            loadMyTournaments();
        }

        function hideAllScreensAndSections() {
            const screens = ['welcome-screen', 'admin-login', 'phone-login', 'otp-verification', 'profile-setup', 'dashboard'];
            screens.forEach(screen => {
                document.getElementById(screen).style.display = 'none';
            });
        }

        function showSection(sectionName) {
            const sections = ['tournaments', 'my-tournaments', 'profile'];
            const navBtns = document.querySelectorAll('.nav-btn');
            
            sections.forEach(section => {
                const element = document.getElementById(section + '-section');
                if (element) {
                    element.classList.remove('active');
                }
            });
            
            navBtns.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(sectionName + '-section').classList.add('active');
            event.target.classList.add('active');
            
            if (sectionName === 'tournaments') {
                loadTournaments();
            } else if (sectionName === 'my-tournaments') {
                loadMyTournaments();
            } else if (sectionName === 'profile') {
                loadUserProfile();
            }
        }

        // Policy Modal Functions
        function showPrivacyPolicy() {
            document.getElementById('privacy-modal').style.display = 'block';
        }

        function closePrivacyModal() {
            document.getElementById('privacy-modal').style.display = 'none';
        }

        function showTermsConditions() {
            document.getElementById('terms-modal').style.display = 'block';
        }

        function closeTermsModal() {
            document.getElementById('terms-modal').style.display = 'none';
        }

        function showRefundPolicy() {
            document.getElementById('refund-modal').style.display = 'block';
        }

        function closeRefundModal() {
            document.getElementById('refund-modal').style.display = 'none';
        }

        function showAboutUs() {
            document.getElementById('about-modal').style.display = 'block';
        }

        function closeAboutModal() {
            document.getElementById('about-modal').style.display = 'none';
        }

        function showContactInfo() {
            document.getElementById('contact-modal').style.display = 'block';
        }

        function closeContactModal() {
            document.getElementById('contact-modal').style.display = 'none';
        }

        function clearMessages() {
            const errorElements = document.querySelectorAll('.error-message');
            const successElements = document.querySelectorAll('.success-message');
            
            errorElements.forEach(el => el.style.display = 'none');
            successElements.forEach(el => el.style.display = 'none');
        }

        // Authentication Functions
        function handleWhatsAppOptIn() {
            currentUser.hasOptedIn = true;
            window.open("https://wa.me/message/UC2XDTIIDEJEO1", "_blank");
            setTimeout(() => {
                showPhoneLogin();
            }, 1000);
        }

        function handleAdminLogin() {
            const username = document.getElementById('admin-username').value.trim();
            const password = document.getElementById('admin-password').value;

            if (!username || !password) {
                showError('admin-error', 'Please enter both username and password');
                return;
            }

            if (username === 'careless999' && password === 'who99knows009') {
                currentUser.isAdmin = true;
                currentUser.hasOptedIn = true;
                currentUser.phoneVerified = true;
                currentUser.phone = '+91-ADMIN'; // Set admin phone identifier
                
                // Create admin user data
                currentUser.userData = {
                    phone: currentUser.phone,
                    name: 'Administrator',
                    age: 25,
                    consentGiven: true,
                    createdAt: new Date().toISOString(),
                    isAdmin: true
                };
                
                showSuccess('admin-success', 'Admin login successful! Redirecting to dashboard...');
                setTimeout(() => {
                    showDashboard();
                }, 1500);
            } else {
                showError('admin-error', 'Invalid username or password');
            }
        }

        // New function to handle admin phone submission without OTP
        function handleAdminPhoneSubmit() {
            const phoneNumber = document.getElementById('phone-number').value.trim();
            
            if (!phoneNumber) {
                showError('phone-error', 'Please enter your phone number');
                return;
            }

            if (!/^\d{10}$/.test(phoneNumber)) {
                showError('phone-error', 'Please enter a valid 10-digit phone number');
                return;
            }

            currentUser.phone = '+91' + phoneNumber;
            currentUser.phoneVerified = true; // Admin bypasses phone verification
            
            // Create admin user data
            currentUser.userData = {
                phone: currentUser.phone,
                name: 'Administrator',
                age: 25,
                consentGiven: true,
                createdAt: new Date().toISOString(),
                isAdmin: true
            };
            
            showSuccess('phone-success', 'Admin access granted!');
            setTimeout(() => {
                showDashboard();
            }, 1500);
        }

        async function requestOTP() {
            const phoneNumber = document.getElementById('phone-number').value.trim();
            
            if (!phoneNumber) {
                showError('phone-error', 'Please enter your phone number');
                return;
            }

            if (!/^\d{10}$/.test(phoneNumber)) {
                showError('phone-error', 'Please enter a valid 10-digit phone number');
                return;
            }

            if (!currentUser.hasOptedIn && !currentUser.isAdmin) {
                showError('phone-error', 'You must opt-in on WhatsApp first before requesting OTP');
                return;
            }

            currentUser.phone = '+91' + phoneNumber;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/otp/send`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ phone: currentUser.phone })
                });

                const data = await response.json();

                if (data.success) {
                    showSuccess('phone-success', 'OTP sent to your WhatsApp! Check your messages.');
                    setTimeout(() => {
                        showOTPVerification();
                    }, 2000);
                } else {
                    showError('phone-error', data.message || 'Failed to send OTP');
                }
            } catch (error) {
                console.error('Error sending OTP:', error);
                showError('phone-error', 'Network error. Please check your connection.');
            }
        }

        async function verifyOTP() {
            const otpCode = document.getElementById('otp-code').value.trim();
            
            if (!otpCode) {
                showError('otp-error', 'Please enter the OTP code');
                return;
            }

            if (!/^\d{6}$/.test(otpCode)) {
                showError('otp-error', 'Please enter a valid 6-digit OTP');
                return;
            }

            try {
                const response = await fetch(`${BACKEND_URL}/api/otp/verify`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ 
                        phone: currentUser.phone, 
                        otp: otpCode 
                    })
                });

                const data = await response.json();

                if (data.success) {
                    currentUser.phoneVerified = true;
                    await checkUserProfile();
                } else {
                    showError('otp-error', data.message || 'Invalid or expired OTP');
                }
            } catch (error) {
                console.error('Error verifying OTP:', error);
                showError('otp-error', 'Network error. Please check your connection.');
            }
        }

        async function checkUserProfile() {
            // Skip profile check for admin users
            if (currentUser.isAdmin) {
                showDashboard();
                return;
            }

            try {
                const response = await fetch(`${BACKEND_URL}/api/consent/profile?phone=${encodeURIComponent(currentUser.phone)}`);
                const data = await response.json();

                if (data.success && data.user && data.user.consentGiven) {
                    currentUser.userData = data.user;
                    showDashboard();
                } else {
                    showProfileSetup();
                }
            } catch (error) {
                console.error('Error checking profile:', error);
                showProfileSetup();
            }
        }

        async function completeProfile() {
            const name = document.getElementById('user-name').value.trim();
            const age = parseInt(document.getElementById('user-age').value);
            const consent = document.getElementById('consent-checkbox').checked;

            if (!name || name.length < 2) {
                showError('profile-error', 'Please enter a valid name (at least 2 characters)');
                return;
            }

            if (!age || age < 13 || age > 100) {
                showError('profile-error', 'Please enter a valid age (13-100)');
                return;
            }

            if (!consent) {
                showError('profile-error', 'Please agree to the terms to continue');
                return;
            }

            try {
                const response = await fetch(`${BACKEND_URL}/api/consent`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        phone: currentUser.phone,
                        name: name,
                        age: age,
                        consent: consent
                    })
                });

                const data = await response.json();

                if (data.success) {
                    currentUser.userData = data.user;
                    showDashboard();
                } else {
                    showError('profile-error', data.message || 'Failed to save profile');
                }
            } catch (error) {
                console.error('Error saving profile:', error);
                showError('profile-error', 'Network error. Please try again.');
            }
        }

        // Dashboard Functions
        async function loadUserProfile() {
            // For admin users, use the preset admin data
            if (currentUser.isAdmin && !currentUser.userData) {
                currentUser.userData = {
                    phone: currentUser.phone,
                    name: 'Administrator',
                    age: 25,
                    consentGiven: true,
                    createdAt: new Date().toISOString(),
                    isAdmin: true
                };
            }

            if (!currentUser.userData && !currentUser.isAdmin) {
                try {
                    const response = await fetch(`${BACKEND_URL}/api/consent/profile?phone=${encodeURIComponent(currentUser.phone)}`);
                    const data = await response.json();
                    if (data.success) {
                        currentUser.userData = data.user;
                    }
                } catch (error) {
                    console.error('Error loading profile:', error);
                }
            }

            if (currentUser.userData) {
                const firstLetter = currentUser.userData.name ? currentUser.userData.name.charAt(0).toUpperCase() : (currentUser.isAdmin ? 'A' : '?');
                document.getElementById('user-display-name').textContent = currentUser.userData.name || 'User';
                document.getElementById('user-phone').textContent = currentUser.isAdmin ? 'Administrator Account' : currentUser.phone;
                document.getElementById('profile-name').textContent = currentUser.userData.name || 'Unknown';
                document.getElementById('profile-phone').textContent = currentUser.isAdmin ? 'Administrator Account' : currentUser.phone;
                document.getElementById('info-phone').textContent = currentUser.isAdmin ? 'Administrator Account' : currentUser.phone;
                document.getElementById('info-name').textContent = currentUser.userData.name || 'Unknown';
                document.getElementById('info-age').textContent = currentUser.userData.age || 'Unknown';
                document.getElementById('info-type').textContent = currentUser.isAdmin ? 'Administrator' : 'Player';
                document.getElementById('info-joined').textContent = currentUser.userData.createdAt ? 
                    new Date(currentUser.userData.createdAt).toLocaleDateString() : 'Unknown';
                
                // Show admin badge if user is admin
                if (currentUser.isAdmin) {
                    document.getElementById('admin-badge').style.display = 'inline-block';
                } else {
                    document.getElementById('admin-badge').style.display = 'none';
                }
            }
        }

        async function loadTournaments() {
            const gameFilter = document.getElementById('game-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            
            try {
                let url = `${BACKEND_URL}/api/tournaments?status=${statusFilter}&limit=20`;
                if (gameFilter) {
                    url += `&gameType=${gameFilter}`;
                }
                
                const response = await fetch(url);
                const data = await response.json();

                if (data.success) {
                    displayTournaments(data.tournaments, 'tournaments-grid');
                } else {
                    document.getElementById('tournaments-grid').innerHTML = 
                        '<div style="text-align: center; padding: 50px; color: #ccc;">Failed to load tournaments</div>';
                }
            } catch (error) {
                console.error('Error loading tournaments:', error);
                document.getElementById('tournaments-grid').innerHTML = 
                    '<div style="text-align: center; padding: 50px; color: #ccc;">Network error. Please try again.</div>';
            }
        }

        async function loadMyTournaments() {
            // For admin users, you might want to load all tournaments or handle differently
            if (currentUser.isAdmin) {
                // Admin can see all tournaments or implement special admin logic here
                loadTournaments(); // For now, just show all tournaments
                return;
            }

            try {
                const response = await fetch(`${BACKEND_URL}/api/tournaments/user/tournaments?phone=${encodeURIComponent(currentUser.phone)}`);
                const data = await response.json();

                if (data.success) {
                    displayTournaments(data.tournaments, 'my-tournaments-grid', true);
                } else {
                    document.getElementById('my-tournaments-grid').innerHTML = 
                        '<div style="text-align: center; padding: 50px; color: #ccc;">No tournaments found</div>';
                }
            } catch (error) {
                console.error('Error loading my tournaments:', error);
                document.getElementById('my-tournaments-grid').innerHTML = 
                    '<div style="text-align: center; padding: 50px; color: #ccc;">Network error. Please try again.</div>';
            }
        }

        function displayTournaments(tournaments, containerId, isMyTournaments = false) {
            const container = document.getElementById(containerId);
            
            if (!tournaments || tournaments.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 50px; color: #ccc;">No tournaments available</div>';
                return;
            }

            container.innerHTML = tournaments.map(tournament => {
                const isRegistered = tournament.players && tournament.players.some(p => p.phone === currentUser.phone);
                const isFull = tournament.players && tournament.players.length >= tournament.maxPlayers;
                const spotsLeft = tournament.maxPlayers - (tournament.players ? tournament.players.length : 0);
                
                let buttonClass = 'available';
                let buttonText = 'Register';
                let buttonAction = `openRegistrationModal('${tournament._id}')`;
                
                // Allow registration for admin users even without phone verification
                const canRegister = currentUser.phoneVerified || currentUser.isAdmin;
                
                if (isRegistered) {
                    buttonClass = 'registered';
                    buttonText = 'Registered ✓';
                    buttonAction = '';
                } else if (isFull) {
                    buttonClass = 'full';
                    buttonText = 'Full';
                    buttonAction = '';
                } else if (tournament.status !== 'UPCOMING') {
                    buttonClass = 'full';
                    buttonText = 'Registration Closed';
                    buttonAction = '';
                } else if (!canRegister) {
                    buttonClass = 'full';
                    buttonText = 'Phone Verification Required';
                    buttonAction = '';
                }

                return `
                    <div class="tournament-card">
                        <div class="tournament-header">
                            <span class="game-type ${tournament.gameType.toLowerCase()}">${tournament.gameType.replace('_', ' ')}</span>
                            <span class="status-badge ${tournament.status.toLowerCase()}">${tournament.status}</span>
                        </div>
                        <h3 class="tournament-title">${tournament.title}</h3>
                        <div class="tournament-details">
                            <div class="detail-item">
                                <span>Entry Fee:</span>
                                <span class="detail-value">₹${tournament.entryFee}</span>
                            </div>
                            <div class="detail-item">
                                <span>Per Kill:</span>
                                <span class="detail-value">₹${tournament.perKill}</span>
                            </div>
                            <div class="detail-item">
                                <span>Winner Prize:</span>
                                <span class="detail-value">₹${tournament.winningAmount}</span>
                            </div>
                            <div class="detail-item">
                                <span>Players:</span>
                                <span class="detail-value">${tournament.players ? tournament.players.length : 0}/${tournament.maxPlayers}</span>
                            </div>
                            <div class="detail-item">
                                <span>Start Time:</span>
                                <span class="detail-value">${new Date(tournament.startTime).toLocaleString()}</span>
                            </div>
                            <div class="detail-item">
                                <span>Spots Left:</span>
                                <span class="detail-value">${spotsLeft}</span>
                            </div>
                        </div>
                        ${isRegistered && tournament.roomId && tournament.roomPassword ? `
                            <div style="background: rgba(37, 211, 102, 0.1); padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 0.9rem;">
                                <div><strong>Room ID:</strong> ${tournament.roomId}</div>
                                <div><strong>Password:</strong> ${tournament.roomPassword}</div>
                            </div>
                        ` : ''}
                        <div class="tournament-actions">
                            <button class="register-btn ${buttonClass}" ${buttonAction ? `onclick="${buttonAction}"` : ''} ${!buttonAction ? 'disabled' : ''}>
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Tournament Registration
        function openRegistrationModal(tournamentId) {
            // Check if user can register
            if (!currentUser.phoneVerified && !currentUser.isAdmin) {
                alert('Please verify your phone number first to register for tournaments.');
                return;
            }

            currentTournamentId = tournamentId;
            
            // Find tournament details
            const tournament = Array.from(document.querySelectorAll('.tournament-card')).find(card => {
                return card.querySelector('.register-btn').getAttribute('onclick').includes(tournamentId);
            });
            
            if (tournament) {
                const title = tournament.querySelector('.tournament-title').textContent;
                const entryFee = tournament.querySelector('.detail-value').textContent;
                
                document.getElementById('modal-tournament-info').innerHTML = `
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h3>${title}</h3>
                        <p>Entry Fee: ${entryFee}</p>
                        ${currentUser.isAdmin ? '<p style="color: #feca57; font-size: 0.9rem;"><strong>Admin Registration</strong></p>' : ''}
                    </div>
                `;
            }
            
            document.getElementById('registration-modal').style.display = 'block';
            document.getElementById('modal-game-name').focus();
        }

        function closeModal() {
            document.getElementById('registration-modal').style.display = 'none';
            document.getElementById('modal-game-name').value = '';
            document.getElementById('modal-uid').value = '';
            clearModalMessages();
        }

        function clearModalMessages() {
            document.getElementById('modal-error').style.display = 'none';
            document.getElementById('modal-success').style.display = 'none';
        }

        async function confirmRegistration() {
            const gameName = document.getElementById('modal-game-name').value.trim();
            const uid = document.getElementById('modal-uid').value.trim();

            if (!gameName || gameName.length < 2) {
                showModalError('Please enter a valid game name (at least 2 characters)');
                return;
            }

            if (!uid) {
                showModalError('Please enter your game UID');
                return;
            }

            try {
                const response = await fetch(`${BACKEND_URL}/api/tournaments/register/${currentTournamentId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        phone: currentUser.phone,
                        gameName: gameName,
                        uid: uid,
                        isAdmin: currentUser.isAdmin // Include admin flag
                    })
                });

                const data = await response.json();

                if (data.success) {
                    showModalSuccess('Registration successful! Room details will be visible once registered.');
                    setTimeout(() => {
                        closeModal();
                        loadTournaments();
                        loadMyTournaments();
                    }, 2000);
                } else {
                    showModalError(data.message || 'Registration failed');
                }
            } catch (error) {
                console.error('Error registering:', error);
                showModalError('Network error. Please try again.');
            }
        }

        function showModalError(message) {
            document.getElementById('modal-error').textContent = message;
            document.getElementById('modal-error').style.display = 'block';
            document.getElementById('modal-success').style.display = 'none';
        }

        function showModalSuccess(message) {
            document.getElementById('modal-success').textContent = message;
            document.getElementById('modal-success').style.display = 'block';
            document.getElementById('modal-error').style.display = 'none';
        }

        // Utility Functions
        function showError(elementId, message) {
            const errorDiv = document.getElementById(elementId);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function showSuccess(elementId, message) {
            const successDiv = document.getElementById(elementId);
            successDiv.textContent = message;
            successDiv.style.display = 'block';
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = {
                    phone: '',
                    isAdmin: false,
                    hasOptedIn: false,
                    userData: null,
                    phoneVerified: false
                };
                currentTournamentId = null;
                showWelcomeScreen();
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Add enter key listeners for forms
            document.getElementById('admin-password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleAdminLogin();
            });
            
            document.getElementById('phone-number').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    if (currentUser.isAdmin) {
                        handleAdminPhoneSubmit();
                    } else {
                        requestOTP();
                    }
                }
            });
            
            document.getElementById('otp-code').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') verifyOTP();
            });

            document.getElementById('user-name').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') document.getElementById('user-age').focus();
            });

            document.getElementById('user-age').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') completeProfile();
            });

            document.getElementById('modal-game-name').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') document.getElementById('modal-uid').focus();
            });

            document.getElementById('modal-uid').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') confirmRegistration();
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                const registrationModal = document.getElementById('registration-modal');
                const privacyModal = document.getElementById('privacy-modal');
                const termsModal = document.getElementById('terms-modal');
                const refundModal = document.getElementById('refund-modal');
                const aboutModal = document.getElementById('about-modal');
                const contactModal = document.getElementById('contact-modal');
                
                if (event.target === registrationModal) {
                    closeModal();
                }
                if (event.target === privacyModal) {
                    closePrivacyModal();
                }
                if (event.target === termsModal) {
                    closeTermsModal();
                }
                if (event.target === refundModal) {
                    closeRefundModal();
                }
                if (event.target === aboutModal) {
                    closeAboutModal();
                }
                if (event.target === contactModal) {
                    closeContactModal();
                }
            });
        });
    </script>
</body>
</html>-avatar').textContent = firstLetter;
                document.getElementById('profile-avatar').textContent = firstLetter;
                document.getElementById('user